generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Attributes {
  id            Int             @id @default(autoincrement())
  name          String
  createdAt     DateTime        @default(now()) @db.DateTime(0)
  updatedAt     DateTime        @default(now()) @db.DateTime(0)
  deletedAt     DateTime?       @db.DateTime(0)
  LoanAttribute LoanAttribute[]
}

model Comments {
  id                             Int       @id @default(autoincrement())
  loanId                         Int
  userId                         Int
  comment                        String?   @db.Text
  uploadId                       Int?
  archived                       Boolean   @default(false)
  archivedAt                     DateTime? @db.DateTime(0)
  archivedBy                     Int?
  createdAt                      DateTime  @default(now()) @db.DateTime(0)
  updatedAt                      DateTime  @default(now()) @db.DateTime(0)
  deletedAt                      DateTime? @db.DateTime(0)
  Loan                           Loan      @relation(fields: [loanId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_Comments_1")
  User                           User      @relation(fields: [userId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_comments_2")
  Uploads                        Uploads?  @relation(fields: [uploadId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_comments_3")
  User_Comments_archivedByToUser User?     @relation("Comments_archivedByToUser", fields: [archivedBy], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_comments_archivedBy")

  @@index([loanId], map: "fk_comments_1_idx")
  @@index([userId], map: "fk_comments_2_idx")
  @@index([uploadId], map: "fk_comments_3")
  @@index([archivedBy], map: "fk_comments_archivedBy")
  @@index([loanId, archived, deletedAt], map: "idx_comments_loan_archived")
  @@index([userId, archived, loanId], map: "idx_comments_user_archived")
}

model ContactLabel {
  id            Int             @id @default(autoincrement())
  name          String          @unique
  description   String?
  isActive      Boolean         @default(true)
  createdAt     DateTime        @default(now()) @db.DateTime(0)
  updatedAt     DateTime        @default(now()) @db.DateTime(0)
  deletedAt     DateTime?       @db.DateTime(0)
  DebtorContact DebtorContact[]

  @@index([deletedAt])
  @@index([isActive])
  @@index([name])
}

model ContactType {
  id            Int             @id @default(autoincrement())
  name          String          @unique
  description   String?
  isActive      Boolean         @default(true)
  createdAt     DateTime        @default(now()) @db.DateTime(0)
  updatedAt     DateTime        @default(now()) @db.DateTime(0)
  deletedAt     DateTime?       @db.DateTime(0)
  DebtorContact DebtorContact[]

  @@index([deletedAt])
  @@index([isActive])
  @@index([name])
}

model Debtor {
  id                  Int                   @id @default(autoincrement())
  publicId            String                @default(dbgenerated("(uuid())")) @db.Char(36)
  firstName           String?
  lastName            String?
  birthdate           DateTime?             @db.Date
  mainEmail           String?
  mainPhone           String?
  mainAddress         String?
  statusId            Int
  createdAt           DateTime              @default(now()) @db.DateTime(0)
  updatedAt           DateTime              @default(now()) @db.DateTime(0)
  deletedAt           DateTime?             @db.DateTime(0)
  idNumber            String?               @unique(map: "idNumber_UNIQUE") @db.VarChar(45)
  DebtorStatus        DebtorStatus          @relation(fields: [statusId], references: [id])
  DebtorContact       DebtorContact[]
  DebtorGuarantors    DebtorGuarantors[]
  DebtorRealEstate    DebtorRealEstate[]
  DebtorStatusHistory DebtorStatusHistory[]
  Loan                Loan[]

  @@index([createdAt])
  @@index([deletedAt])
  @@index([firstName, lastName])
  @@index([mainEmail])
  @@index([mainPhone])
  @@index([statusId])
}

model DebtorContact {
  id           Int           @id @default(autoincrement())
  debtorId     Int
  typeId       Int
  value        String
  labelId      Int?
  isPrimary    Boolean       @default(false)
  userId       Int?
  notes        String?
  createdAt    DateTime      @default(now()) @db.DateTime(0)
  updatedAt    DateTime      @default(now()) @db.DateTime(0)
  deletedAt    DateTime?     @db.DateTime(0)
  Debtor       Debtor        @relation(fields: [debtorId], references: [id], onDelete: Cascade)
  ContactLabel ContactLabel? @relation(fields: [labelId], references: [id])
  ContactType  ContactType   @relation(fields: [typeId], references: [id])
  User         User?         @relation(fields: [userId], references: [id])
  SmsHistory   SmsHistory[]

  @@index([debtorId])
  @@index([deletedAt])
  @@index([isPrimary])
  @@index([labelId])
  @@index([typeId])
  @@index([userId], map: "DebtorContact_userId_fkey")
}

model DebtorStatus {
  id                 Int                   @id @default(autoincrement())
  name               String                @unique
  description        String?
  isActive           Boolean               @default(true)
  createdAt          DateTime              @default(now()) @db.DateTime(0)
  updatedAt          DateTime              @default(now()) @db.DateTime(0)
  deletedAt          DateTime?             @db.DateTime(0)
  Debtor             Debtor[]
  newStatusHistories DebtorStatusHistory[] @relation("NewStatusRelation")
  oldStatusHistories DebtorStatusHistory[] @relation("OldStatusRelation")

  @@index([deletedAt])
  @@index([isActive])
  @@index([name])
}

model DebtorStatusHistory {
  id          Int           @id @default(autoincrement())
  debtorId    Int
  oldStatusId Int?
  newStatusId Int
  changedBy   Int
  notes       String?
  createdAt   DateTime      @default(now()) @db.DateTime(0)
  updatedAt   DateTime      @default(now()) @db.DateTime(0)
  deletedAt   DateTime?     @db.DateTime(0)
  User        User          @relation(fields: [changedBy], references: [id])
  Debtor      Debtor        @relation(fields: [debtorId], references: [id], onDelete: Cascade)
  newStatus   DebtorStatus  @relation("NewStatusRelation", fields: [newStatusId], references: [id])
  oldStatus   DebtorStatus? @relation("OldStatusRelation", fields: [oldStatusId], references: [id])

  @@index([changedBy])
  @@index([debtorId])
  @@index([deletedAt])
  @@index([newStatusId], map: "DebtorStatusHistory_newStatusId_fkey")
  @@index([oldStatusId], map: "DebtorStatusHistory_oldStatusId_fkey")
}

model Loan {
  id                      Int                       @id @default(autoincrement())
  publicId                String                    @unique(map: "publicId_UNIQUE") @default(dbgenerated("(uuid())")) @db.Char(36)
  portfolioId             Int
  groupId                 Int?
  debtorId                Int
  caseId                  Int?
  principal               Decimal                   @db.Decimal(12, 2)
  interest                Decimal?                  @default(0.00) @db.Decimal(12, 2)
  penalty                 Decimal?                  @default(0.00) @db.Decimal(12, 2)
  otherFee                Decimal?                  @default(0.00) @db.Decimal(12, 2)
  legalCharges            Decimal?                  @default(0.00) @db.Decimal(12, 2)
  totalDebt               Decimal?                  @default(0.00) @db.Decimal(12, 2)
  purchasedAmount         Decimal                   @db.Decimal(12, 2)
  loanStartDate           DateTime                  @db.Date
  loanDueDate             DateTime                  @db.Date
  closedAt                DateTime?                 @db.DateTime(0)
  statusId                Int
  actDays                 Int                       @default(0)
  createdAt               DateTime                  @default(now()) @db.DateTime(0)
  updatedAt               DateTime                  @default(now()) @db.DateTime(0)
  deletedAt               DateTime?                 @db.DateTime(0)
  currency                String?                   @db.VarChar(45)
  olDbId                  Int?
  Charges                 Charges[]
  Comments                Comments[]
  Committee               Committee[]
  Debtor                  Debtor                    @relation(fields: [debtorId], references: [id], onDelete: Cascade)
  Portfolio               Portfolio                 @relation(fields: [portfolioId], references: [id], onDelete: Cascade)
  LoanStatus              LoanStatus                @relation(fields: [statusId], references: [id])
  PortfolioCaseGroup      PortfolioCaseGroup?       @relation(fields: [groupId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_Loan_groupId")
  LoanAddress             LoanAddress[]
  LoanAssignment          LoanAssignment[]
  LoanAssignmentHistory   LoanAssignmentHistory[]
  LoanAttribute           LoanAttribute[]
  LoanBalanceHistory      LoanBalanceHistory[]
  LoanCollateralStatus    LoanCollateralStatus[]
  LoanLegalStage          LoanLegalStage[]
  LoanLitigationStage     LoanLitigationStage[]
  LoanMarks               LoanMarks[]
  LoanRemaining           LoanRemaining[]
  LoanStatusHistory       LoanStatusHistory[]
  LoanVisit               LoanVisit[]
  PastPayments            PastPayments[]
  PaymentAllocationDetail PaymentAllocationDetail[]
  PaymentCommitment       PaymentCommitment[]
  Reminders               Reminders[]
  SmsHistory              SmsHistory[]
  Tasks                   Tasks[]
  Transaction             Transaction[]

  @@index([createdAt])
  @@index([debtorId])
  @@index([deletedAt])
  @@index([loanDueDate])
  @@index([portfolioId])
  @@index([statusId])
  @@index([groupId], map: "idx_group")
}

model LoanAttribute {
  id          Int        @id @default(autoincrement())
  loanId      Int
  attributeId Int
  value       String?
  createdAt   DateTime   @default(now()) @db.DateTime(0)
  updatedAt   DateTime   @default(now()) @db.DateTime(0)
  deletedAt   DateTime?  @db.DateTime(0)
  Attributes  Attributes @relation(fields: [attributeId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  Loan        Loan       @relation(fields: [loanId], references: [id])

  @@index([attributeId], map: "fk_LoanAttribute_1_idx")
  @@index([loanId], map: "fk_LoanAttribute_2_idx")
}

model LoanStatus {
  id               Int                 @id @default(autoincrement())
  name             String              @unique
  description      String?
  isActive         Boolean             @default(true)
  createdAt        DateTime            @default(now()) @db.DateTime(0)
  updatedAt        DateTime            @default(now()) @db.DateTime(0)
  deletedAt        DateTime?           @db.DateTime(0)
  Loan             Loan[]
  newStatusHistory LoanStatusHistory[] @relation("NewLoanStatusRelation")
  oldStatusHistory LoanStatusHistory[] @relation("OldLoanStatusRelation")

  @@index([deletedAt])
  @@index([isActive])
  @@index([name])
}

model LoanStatusHistory {
  id                  Int         @id @default(autoincrement())
  loanId              Int
  oldStatusId         Int?
  newStatusId         Int
  changedBy           Int
  notes               String?
  createdAt           DateTime    @default(now()) @db.DateTime(0)
  updatedAt           DateTime    @default(now()) @db.DateTime(0)
  deletedAt           DateTime?   @db.DateTime(0)
  User                User        @relation(fields: [changedBy], references: [id])
  Loan                Loan        @relation(fields: [loanId], references: [id], onDelete: Cascade)
  LoanStatusNewStatus LoanStatus  @relation("NewLoanStatusRelation", fields: [newStatusId], references: [id])
  LoanStatusOldStatus LoanStatus? @relation("OldLoanStatusRelation", fields: [oldStatusId], references: [id])

  @@index([changedBy])
  @@index([deletedAt])
  @@index([loanId])
  @@index([newStatusId], map: "LoanStatusHistory_newStatusId_fkey")
  @@index([oldStatusId], map: "LoanStatusHistory_oldStatusId_fkey")
}

model PaymentCommitment {
  id              Int                    @id @default(autoincrement())
  loanId          Int
  paymentDate     DateTime               @db.Date
  amount          Decimal                @db.Decimal(12, 2)
  comment         String?                @db.Text
  type            PaymentCommitment_type
  userId          Int
  isActive        Int                    @default(1) @db.TinyInt
  createdAt       DateTime               @default(now()) @db.DateTime(0)
  updatedAt       DateTime               @default(now()) @db.DateTime(0)
  deletedAt       DateTime?              @db.DateTime(0)
  Loan            Loan                   @relation(fields: [loanId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_PaymentCommitment_1")
  User            User                   @relation(fields: [userId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_PaymentCommitment_2")
  PaymentSchedule PaymentSchedule[]

  @@index([loanId], map: "fk_PaymentCommitment_1_idx")
  @@index([userId], map: "fk_PaymentCommitment_2_idx")
}

model PaymentSchedule {
  id                Int               @id @default(autoincrement())
  commitmentId      Int
  paymentDate       DateTime          @db.Date
  amount            Decimal           @db.Decimal(12, 2)
  status            String            @default("PENDING") @db.VarChar(20)
  paidAmount        Decimal?          @default(0.00) @db.Decimal(12, 2)
  paidDate          DateTime?         @db.Date
  createdAt         DateTime          @default(now()) @db.DateTime(0)
  updatedAt         DateTime          @default(now()) @db.DateTime(0)
  deletedAt         DateTime?         @db.DateTime(0)
  PaymentCommitment PaymentCommitment @relation(fields: [commitmentId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_PaymentSchedule_1")

  @@index([commitmentId], map: "fk_PaymentSchedule_1_idx")
  @@index([paymentDate], map: "idx_paymentDate")
  @@index([status], map: "idx_status")
}

model Portfolio {
  id              Int              @id @default(autoincrement())
  name            String
  purchasePrice   Decimal          @db.Decimal(12, 2)
  purchaseDate    DateTime         @db.Date
  bankName        String
  sellerId        Int?
  notes           String?
  createdAt       DateTime         @default(now()) @db.DateTime(0)
  updatedAt       DateTime         @default(now()) @db.DateTime(0)
  deletedAt       DateTime?        @db.DateTime(0)
  Loan            Loan[]
  portfolioSeller portfolioSeller? @relation(fields: [sellerId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_Portfolio_portfolioSeller_1")

  @@index([deletedAt])
  @@index([name])
  @@index([purchaseDate])
  @@index([sellerId], map: "fk_Portfolio_sellerId_1_idx")
}

model Role {
  id                         Int                          @id @default(autoincrement())
  name                       String                       @unique
  createdAt                  DateTime                     @default(now()) @db.DateTime(0)
  updatedAt                  DateTime                     @default(now()) @db.DateTime(0)
  deletedAt                  DateTime?                    @db.DateTime(0)
  LoanAssignment             LoanAssignment[]
  LoanAssignmentHistory      LoanAssignmentHistory[]
  TransactionUserAssignments TransactionUserAssignments[]
  User                       User[]

  @@index([deletedAt])
  @@index([name])
}

model Transaction {
  id                          Int                          @id @default(autoincrement())
  publicId                    String                       @unique(map: "publicId_UNIQUE") @default(dbgenerated("(uuid())")) @db.Char(36)
  loanId                      Int?
  amount                      Decimal?                     @db.Decimal(12, 2)
  userId                      Int?
  paymentDate                 DateTime?                    @db.Date
  principal                   Decimal?                     @db.Decimal(12, 2)
  interest                    Decimal?                     @db.Decimal(12, 2)
  penalty                     Decimal?                     @db.Decimal(12, 2)
  fees                        Decimal?                     @db.Decimal(12, 2)
  legal                       Decimal?                     @db.Decimal(12, 2)
  transactionChannelAccountId Int?
  currency                    String?                      @default("GEL") @db.VarChar(45)
  comment                     String?                      @db.VarChar(255)
  createdAt                   DateTime?                    @default(now()) @db.DateTime(0)
  deleted                     Int?                         @default(0) @db.TinyInt
  Loan                        Loan?                        @relation(fields: [loanId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_Transactions_1")
  User                        User?                        @relation(fields: [userId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_Transactions_2")
  TransactionChannelAccounts  TransactionChannelAccounts?  @relation(fields: [transactionChannelAccountId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_Transactions_3")
  TransactionDeleted          TransactionDeleted[]
  TransactionUserAssignments  TransactionUserAssignments[]

  @@index([loanId], map: "fk_Transactions_1_idx")
  @@index([userId], map: "fk_Transactions_2_idx")
  @@index([transactionChannelAccountId], map: "fk_Transactions_3_idx")
}

model TransactionChannelAccounts {
  id                   Int                  @id @default(autoincrement())
  transactionChannelId Int?
  name                 String?              @db.VarChar(100)
  active               Int?                 @default(1) @db.TinyInt
  createdAt            DateTime?            @default(now()) @db.DateTime(0)
  updatedAt            DateTime?            @default(now()) @db.DateTime(0)
  Charges              Charges[]
  Transaction          Transaction[]
  TransactionChannels  TransactionChannels? @relation(fields: [transactionChannelId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_TransactionChannelAccounts_1")

  @@index([transactionChannelId], map: "fk_TransactionChannelAccounts_1_idx")
}

model TransactionChannels {
  id                         Int                          @id @default(autoincrement())
  name                       String                       @db.VarChar(255)
  active                     Int?                         @default(1) @db.TinyInt
  createdAt                  DateTime?                    @default(now()) @db.DateTime(0)
  updatedAt                  DateTime?                    @default(now()) @db.DateTime(0)
  Charges                    Charges[]
  TransactionChannelAccounts TransactionChannelAccounts[]
}

model TransactionDeleted {
  id            Int          @id @default(autoincrement())
  transactionId Int?
  userId        Int?
  deletedAt     DateTime?    @default(now()) @db.DateTime(0)
  Transaction   Transaction? @relation(fields: [transactionId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_TransactionDeleted_1")
  User          User?        @relation(fields: [userId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_TransactionDeleted_2")

  @@index([transactionId], map: "fk_TransactionDeleted_1_idx")
  @@index([userId], map: "fk_TransactionDeleted_2_idx")
}

model User {
  id                                                              Int                          @id @default(autoincrement())
  publicId                                                        String                       @unique(map: "publicId_UNIQUE") @default(dbgenerated("(uuid())")) @db.Char(36)
  accountId                                                       String                       @unique
  email                                                           String                       @unique
  firstName                                                       String
  lastName                                                        String
  hash                                                            String
  isActive                                                        Boolean                      @default(true)
  roleId                                                          Int
  mustChangePassword                                              Boolean                      @default(true)
  createdAt                                                       DateTime                     @default(now()) @db.DateTime(0)
  updatedAt                                                       DateTime                     @default(now()) @db.DateTime(0)
  deletedAt                                                       DateTime?                    @db.DateTime(0)
  Charges                                                         Charges[]
  CollectorMonthlyReport_CollectorMonthlyReport_generatedByToUser CollectorMonthlyReport[]     @relation("CollectorMonthlyReport_generatedByToUser")
  CollectorMonthlyReport_CollectorMonthlyReport_lockedByToUser    CollectorMonthlyReport[]     @relation("CollectorMonthlyReport_lockedByToUser")
  CollectorMonthlyReport_CollectorMonthlyReport_collectorIdToUser CollectorMonthlyReport[]     @relation("CollectorMonthlyReport_collectorIdToUser")
  CollectorsMonthlyTarget                                         CollectorsMonthlyTarget[]
  Comments                                                        Comments[]
  Comments_Comments_archivedByToUser                              Comments[]                   @relation("Comments_archivedByToUser")
  Committee_Committee_requesterIdToUser                           Committee[]                  @relation("Committee_requesterIdToUser")
  Committee_Committee_responderIdToUser                           Committee[]                  @relation("Committee_responderIdToUser")
  DebtorContact                                                   DebtorContact[]
  DebtorStatusHistory                                             DebtorStatusHistory[]
  LoanAddress                                                     LoanAddress[]
  LoanAssignment                                                  LoanAssignment[]
  LoanAssignmentHistory_LoanAssignmentHistory_userIdToUser        LoanAssignmentHistory[]      @relation("LoanAssignmentHistory_userIdToUser")
  LoanAssignmentHistory_LoanAssignmentHistory_createdByToUser     LoanAssignmentHistory[]      @relation("LoanAssignmentHistory_createdByToUser")
  LoanCollateralStatus                                            LoanCollateralStatus[]
  LoanLegalStage                                                  LoanLegalStage[]
  LoanLitigationStage                                             LoanLitigationStage[]
  LoanStatusHistory                                               LoanStatusHistory[]
  LoanVisit                                                       LoanVisit[]
  PaymentCommitment                                               PaymentCommitment[]
  Reminders_Reminders_fromUserIdToUser                            Reminders[]                  @relation("Reminders_fromUserIdToUser")
  Reminders_Reminders_toUserIdToUser                              Reminders[]                  @relation("Reminders_toUserIdToUser")
  Tasks_Tasks_fromUserToUser                                      Tasks[]                      @relation("Tasks_fromUserToUser")
  Tasks_Tasks_toUserIdToUser                                      Tasks[]                      @relation("Tasks_toUserIdToUser")
  TeamMembership                                                  TeamMembership[]
  Transaction                                                     Transaction[]
  TransactionDeleted                                              TransactionDeleted[]
  TransactionUserAssignments                                      TransactionUserAssignments[]
  Role                                                            Role                         @relation(fields: [roleId], references: [id])

  @@index([accountId])
  @@index([deletedAt])
  @@index([email])
  @@index([roleId], map: "User_roleId_fkey")
}

model portfolioSeller {
  id        Int         @id @default(autoincrement())
  name      String?     @db.VarChar(45)
  active    String?     @default("1") @db.VarChar(45)
  createdAt DateTime    @default(now()) @db.DateTime(0)
  updatedAt DateTime    @default(now()) @db.DateTime(0)
  deletedAt DateTime?   @db.DateTime(0)
  Portfolio Portfolio[]
}

model Tasks {
  id                        Int        @id @default(autoincrement())
  loanId                    Int?
  task                      String?    @db.VarChar(255)
  response                  String?    @db.VarChar(255)
  fromUser                  Int
  toUserId                  Int
  deadline                  DateTime   @db.Date
  taskStatusId              Int
  createdAt                 DateTime   @default(now()) @db.DateTime(0)
  updatedAt                 DateTime   @default(now()) @db.DateTime(0)
  deletedAt                 DateTime?  @db.DateTime(0)
  Loan                      Loan?      @relation(fields: [loanId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_Tasks_1")
  User_Tasks_fromUserToUser User       @relation("Tasks_fromUserToUser", fields: [fromUser], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_Tasks_2")
  User_Tasks_toUserIdToUser User       @relation("Tasks_toUserIdToUser", fields: [toUserId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_Tasks_3")
  TaskStatus                TaskStatus @relation(fields: [taskStatusId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_Tasks_4")

  @@index([loanId], map: "fk_Tasks_1_idx")
  @@index([fromUser], map: "fk_Tasks_2")
  @@index([toUserId], map: "fk_Tasks_3")
  @@index([taskStatusId], map: "fk_Tasks_4")
}

model SmsHistory {
  id            Int               @id @default(autoincrement())
  loanId        Int
  contactId     Int
  phone         String            @db.VarChar(45)
  message       String            @db.VarChar(500)
  status        SmsHistory_status
  createdAt     DateTime          @default(now()) @db.DateTime(0)
  updatedAt     DateTime          @default(now()) @db.DateTime(0)
  deletedAt     DateTime?         @db.DateTime(0)
  balance       Int?
  errorCode     Int?
  messageId     Int?
  smsJson       String?           @db.VarChar(500)
  Loan          Loan              @relation(fields: [loanId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_SmsHistory_1")
  DebtorContact DebtorContact     @relation(fields: [contactId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_SmsHistory_2")

  @@index([loanId], map: "fk_SmsHistory_1")
  @@index([contactId], map: "fk_SmsHistory_2")
}

model LoanAssignment {
  id           Int       @id @default(autoincrement())
  loanId       Int
  userId       Int
  roleId       Int
  assignedAt   DateTime  @default(now()) @db.DateTime(0)
  unassignedAt DateTime? @db.DateTime(0)
  isActive     Boolean   @default(true)
  createdAt    DateTime  @default(now()) @db.DateTime(0)
  updatedAt    DateTime  @default(now()) @db.DateTime(0)
  deletedAt    DateTime? @db.DateTime(0)
  Loan         Loan      @relation(fields: [loanId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_LoanAssignment_1")
  User         User      @relation(fields: [userId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_LoanAssignment_2")
  Role         Role      @relation(fields: [roleId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_LoanAssignment_3")

  @@index([loanId], map: "fk_LoanAssignment_1")
  @@index([userId], map: "fk_LoanAssignment_2")
  @@index([roleId], map: "fk_LoanAssignment_3")
}

model LoanAssignmentHistory {
  id                                         Int                          @id @default(autoincrement())
  loanId                                     Int
  userId                                     Int
  roleId                                     Int
  action                                     LoanAssignmentHistory_action
  actionDate                                 DateTime                     @default(now()) @db.DateTime(0)
  createdBy                                  Int
  deletedAt                                  DateTime?                    @db.DateTime(0)
  Loan                                       Loan                         @relation(fields: [loanId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_LoanAssignmentHistory_1")
  User_LoanAssignmentHistory_userIdToUser    User                         @relation("LoanAssignmentHistory_userIdToUser", fields: [userId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_LoanAssignmentHistory_2")
  Role                                       Role                         @relation(fields: [roleId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_LoanAssignmentHistory_3")
  User_LoanAssignmentHistory_createdByToUser User                         @relation("LoanAssignmentHistory_createdByToUser", fields: [createdBy], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_LoanAssignmentHistory_4")

  @@index([loanId], map: "fk_LoanAssignmentHistory_1")
  @@index([userId], map: "fk_LoanAssignmentHistory_2")
  @@index([roleId], map: "fk_LoanAssignmentHistory_3")
  @@index([createdBy], map: "fk_LoanAssignmentHistory_4")
}

model Committee {
  id                               Int              @id @default(autoincrement())
  loanId                           Int
  requesterId                      Int
  responderId                      Int?
  principalAmount                  Decimal          @db.Decimal(12, 2)
  requestText                      String           @db.VarChar(500)
  requestDate                      DateTime         @default(now()) @db.DateTime(0)
  responseText                     String?          @db.VarChar(500)
  responseDate                     DateTime?        @db.DateTime(0)
  agreementMinAmount               Decimal?         @db.Decimal(12, 2)
  uploadId                         Int?
  type                             Committee_type   @default(none)
  status                           Committee_status @default(pending)
  createdAt                        DateTime         @default(now()) @db.DateTime(0)
  updatedAt                        DateTime         @default(now()) @db.DateTime(0)
  deletedAt                        DateTime?        @db.DateTime(0)
  Loan                             Loan             @relation(fields: [loanId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_committee_1")
  User_Committee_requesterIdToUser User             @relation("Committee_requesterIdToUser", fields: [requesterId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_committee_2")
  User_Committee_responderIdToUser User?            @relation("Committee_responderIdToUser", fields: [responderId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_committee_3")
  Uploads                          Uploads?         @relation(fields: [uploadId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_committee_upload_4")

  @@index([loanId], map: "idx_committee_1")
  @@index([requesterId], map: "idx_committee_2")
  @@index([responderId], map: "idx_committee_3")
  @@index([uploadId], map: "fk_committee_upload_4")
}

model Marks {
  id        Int         @id @default(autoincrement())
  title     String      @db.VarChar(500)
  createdAt DateTime    @default(now()) @db.DateTime(0)
  updatedAt DateTime    @default(now()) @db.DateTime(0)
  deletedAt DateTime?   @db.DateTime(0)
  LoanMarks LoanMarks[]

  @@index([deletedAt], map: "idx_deletedAt")
}

model LoanMarks {
  id        Int       @id @default(autoincrement())
  loanId    Int
  markId    Int
  comment   String?   @db.VarChar(500)
  deadline  DateTime? @db.DateTime(0)
  createdAt DateTime  @default(now()) @db.DateTime(0)
  updatedAt DateTime  @default(now()) @db.DateTime(0)
  deletedAt DateTime? @db.DateTime(0)
  Loan      Loan      @relation(fields: [loanId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_LoanMarks_1")
  Marks     Marks     @relation(fields: [markId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_LoanMarks_2")

  @@index([loanId], map: "idx_LoanMarks_1")
  @@index([markId], map: "idx_LoanMarks_2")
  @@index([deletedAt], map: "idx_deletedAt")
}

model LegalStage {
  id             Int              @id @default(autoincrement())
  title          String           @db.VarChar(500)
  createdAt      DateTime         @default(now()) @db.DateTime(0)
  updatedAt      DateTime         @default(now()) @db.DateTime(0)
  deletedAt      DateTime?        @db.DateTime(0)
  LoanLegalStage LoanLegalStage[]

  @@index([deletedAt], map: "idx_deletedAt")
}

model LoanLegalStage {
  id           Int        @id @default(autoincrement())
  loanId       Int
  legalStageId Int
  comment      String?    @db.VarChar(500)
  userId       Int
  createdAt    DateTime   @default(now()) @db.DateTime(0)
  updatedAt    DateTime   @default(now()) @db.DateTime(0)
  deletedAt    DateTime?  @db.DateTime(0)
  Loan         Loan       @relation(fields: [loanId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_LoanLegalStage_1")
  LegalStage   LegalStage @relation(fields: [legalStageId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_LoanLegalStage_2")
  User         User       @relation(fields: [userId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_LoanLegalStage_3")

  @@index([loanId], map: "idx_LoanLegalStage_1")
  @@index([legalStageId], map: "idx_LoanLegalStage_2")
  @@index([userId], map: "idx_LoanLegalStage_3")
  @@index([deletedAt], map: "idx_deletedAt")
}

model CollateralStatus {
  id                   Int                    @id @default(autoincrement())
  title                String                 @db.VarChar(500)
  createdAt            DateTime               @default(now()) @db.DateTime(0)
  updatedAt            DateTime               @default(now()) @db.DateTime(0)
  deletedAt            DateTime?              @db.DateTime(0)
  LoanCollateralStatus LoanCollateralStatus[]

  @@index([deletedAt], map: "idx_deletedAt")
}

model LoanCollateralStatus {
  id                 Int              @id @default(autoincrement())
  loanId             Int
  collateralStatusId Int
  comment            String?          @db.VarChar(500)
  userId             Int
  createdAt          DateTime         @default(now()) @db.DateTime(0)
  updatedAt          DateTime         @default(now()) @db.DateTime(0)
  deletedAt          DateTime?        @db.DateTime(0)
  Loan               Loan             @relation(fields: [loanId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_LoanCollateralStatus_1")
  CollateralStatus   CollateralStatus @relation(fields: [collateralStatusId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_LoanCollateralStatus_2")
  User               User             @relation(fields: [userId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_LoanCollateralStatus_3")

  @@index([loanId], map: "idx_LoanCollateralStatus_1")
  @@index([collateralStatusId], map: "idx_LoanCollateralStatus_2")
  @@index([userId], map: "idx_LoanCollateralStatus_3")
  @@index([deletedAt], map: "idx_deletedAt")
}

model LitigationStage {
  id                  Int                   @id @default(autoincrement())
  title               String                @db.VarChar(500)
  createdAt           DateTime              @default(now()) @db.DateTime(0)
  updatedAt           DateTime              @default(now()) @db.DateTime(0)
  deletedAt           DateTime?             @db.DateTime(0)
  LoanLitigationStage LoanLitigationStage[]

  @@index([deletedAt], map: "idx_deletedAt")
}

model LoanLitigationStage {
  id                Int             @id @default(autoincrement())
  loanId            Int
  litigationStageId Int
  comment           String?         @db.VarChar(500)
  userId            Int
  createdAt         DateTime        @default(now()) @db.DateTime(0)
  updatedAt         DateTime        @default(now()) @db.DateTime(0)
  deletedAt         DateTime?       @db.DateTime(0)
  Loan              Loan            @relation(fields: [loanId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_LoanLitigationStage_1")
  LitigationStage   LitigationStage @relation(fields: [litigationStageId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_LoanLitigationStage_2")
  User              User            @relation(fields: [userId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_LoanLitigationStage_3")

  @@index([loanId], map: "idx_LoanLitigationStage_1")
  @@index([litigationStageId], map: "idx_LoanLitigationStage_2")
  @@index([userId], map: "idx_LoanLitigationStage_3")
  @@index([deletedAt], map: "idx_deletedAt")
}

model Templates {
  id          Int            @id @default(autoincrement())
  title       String         @db.VarChar(50)
  filePath    String         @db.VarChar(50)
  description String?        @db.VarChar(500)
  isActive    Boolean        @default(true)
  type        Templates_type @default(court)
  createdAt   DateTime       @default(now()) @db.DateTime(0)
  updatedAt   DateTime       @default(now()) @db.DateTime(0)
  deletedAt   DateTime?      @db.DateTime(0)

  @@index([deletedAt], map: "idx_deletedAt")
}

model LoanRemaining {
  id           Int       @id @default(autoincrement())
  loanId       Int?
  principal    Decimal?  @db.Decimal(12, 2)
  interest     Decimal?  @db.Decimal(12, 2)
  penalty      Decimal?  @db.Decimal(12, 2)
  otherFee     Decimal?  @db.Decimal(12, 2)
  legalCharges Decimal?  @db.Decimal(12, 2)
  currentDebt  Decimal?  @db.Decimal(12, 2)
  agreementMin Decimal?  @db.Decimal(12, 2)
  createdAt    DateTime  @default(now()) @db.DateTime(0)
  updatedAt    DateTime  @default(now()) @db.DateTime(0)
  deletedAt    DateTime? @db.DateTime(0)
  Loan         Loan?     @relation(fields: [loanId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_LoanRemaining_1")

  @@index([loanId], map: "fk_LoanRemaining_1")
  @@index([deletedAt], map: "idx_deletedAt")
}

model ChargeType {
  id        Int       @id @default(autoincrement())
  title     String    @db.VarChar(500)
  createdAt DateTime  @default(now()) @db.DateTime(0)
  updatedAt DateTime  @default(now()) @db.DateTime(0)
  deletedAt DateTime? @db.DateTime(0)
  Charges   Charges[]

  @@index([deletedAt], map: "idx_deletedAt")
}

model Charges {
  id                          Int                         @id @default(autoincrement())
  publicId                    String                      @unique(map: "publicId_UNIQUE") @default(dbgenerated("(uuid())")) @db.Char(36)
  loanId                      Int?
  amount                      Decimal?                    @db.Decimal(12, 2)
  paidAmount                  Decimal                     @default(0.00) @db.Decimal(12, 2)
  status                      Charges_status              @default(UNPAID)
  userId                      Int?
  paymentDate                 DateTime?                   @db.Date
  transactionChannelAccountId Int?
  channelId                   Int?
  chargeTypeId                Int
  currency                    String?                     @default("GEL") @db.VarChar(45)
  comment                     String                      @db.VarChar(500)
  createdAt                   DateTime                    @default(now()) @db.DateTime(0)
  updatedAt                   DateTime                    @default(now()) @db.DateTime(0)
  deletedAt                   DateTime?                   @db.DateTime(0)
  Loan                        Loan?                       @relation(fields: [loanId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_Charges_1")
  User                        User?                       @relation(fields: [userId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_Charges_2")
  TransactionChannelAccounts  TransactionChannelAccounts? @relation(fields: [transactionChannelAccountId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_Charges_3")
  ChargeType                  ChargeType                  @relation(fields: [chargeTypeId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_Charges_4")
  TransactionChannels         TransactionChannels?        @relation(fields: [channelId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_Charges_5")

  @@index([loanId], map: "fk_Charges_1_idx")
  @@index([userId], map: "fk_Charges_2_idx")
  @@index([transactionChannelAccountId], map: "fk_Charges_3_idx")
  @@index([chargeTypeId], map: "fk_Charges_4_idx")
  @@index([deletedAt], map: "idx_deletedAt")
  @@index([channelId], map: "fk_Charges_5_idx")
}

model PastPayments {
  id          Int       @id @default(autoincrement())
  loanId      Int?
  paymentDate DateTime? @db.DateTime(0)
  payment     Decimal?  @db.Decimal(12, 2)
  principal   Decimal?  @db.Decimal(12, 2)
  interest    Decimal?  @db.Decimal(12, 2)
  penalty     Decimal?  @db.Decimal(12, 2)
  otherFee    Decimal?  @db.Decimal(12, 2)
  currency    String?   @db.VarChar(45)
  comment     String?   @db.VarChar(500)
  createdAt   DateTime  @default(now()) @db.DateTime(0)
  updatedAt   DateTime  @default(now()) @db.DateTime(0)
  deletedAt   DateTime? @db.DateTime(0)
  Loan        Loan?     @relation(fields: [loanId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_PastPayments_1")

  @@index([loanId], map: "fk_PastPayments_1_idx")
  @@index([deletedAt], map: "idx_deletedAt")
}

model DebtorRealEstate {
  id            Int       @id @default(autoincrement())
  debtorId      Int
  address       String?
  cadastralCode String?   @db.VarChar(50)
  description   String?
  createdAt     DateTime  @default(now()) @db.DateTime(0)
  updatedAt     DateTime  @default(now()) @db.DateTime(0)
  deletedAt     DateTime? @db.DateTime(0)
  Debtor        Debtor    @relation(fields: [debtorId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_DebtorRealEstate_1")

  @@index([debtorId], map: "fk_DebtorRealEstate_1")
}

model DebtorGuarantors {
  id        Int       @id @default(autoincrement())
  debtorId  Int
  firstName String
  lastName  String
  phone     String?
  mobile    String?
  address   String?
  idNumber  String?   @db.VarChar(45)
  createdAt DateTime  @default(now()) @db.DateTime(0)
  updatedAt DateTime  @default(now()) @db.DateTime(0)
  deletedAt DateTime? @db.DateTime(0)
  Debtor    Debtor    @relation(fields: [debtorId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_DebtorGuarantors_1")

  @@index([debtorId], map: "fk_DebtorGuarantors_1")
}

model Uploads {
  id               Int         @id @default(autoincrement())
  originalFileName String      @db.VarChar(255)
  filePath         String      @db.VarChar(1024)
  sizeBytes        BigInt?     @db.UnsignedBigInt
  createdAt        DateTime    @default(now()) @db.DateTime(0)
  updatedAt        DateTime    @default(now()) @db.DateTime(0)
  deletedAt        DateTime?   @db.DateTime(0)
  Comments         Comments[]
  Committee        Committee[]

  @@index([filePath(length: 768)], map: "idx_filePath")
}

model Team {
  id             Int              @id @default(autoincrement())
  name           String           @db.VarChar(255)
  description    String?          @db.VarChar(255)
  createdAt      DateTime         @default(now()) @db.DateTime(0)
  updatedAt      DateTime         @default(now()) @db.DateTime(0)
  deletedAt      DateTime?        @db.DateTime(0)
  TeamMembership TeamMembership[]
}

model TeamMembership {
  id        Int                     @id @default(autoincrement())
  teamId    Int
  userId    Int
  teamRole  TeamMembership_teamRole @default(member)
  joinedAt  DateTime                @default(now()) @db.DateTime(0)
  createdAt DateTime                @default(now()) @db.DateTime(0)
  updatedAt DateTime                @default(now()) @db.DateTime(0)
  deletedAt DateTime?               @db.DateTime(0)
  Team      Team                    @relation(fields: [teamId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_TeamMemberships_1")
  User      User                    @relation(fields: [userId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_TeamMemberships_2")

  @@unique([teamId, userId, deletedAt], map: "unique_active_membership")
  @@index([teamId], map: "fk_TeamMemberships_1")
  @@index([userId], map: "fk_TeamMemberships_2")
}

model City {
  id          Int           @id @default(autoincrement())
  city        String?       @db.VarChar(255)
  createdAt   DateTime      @default(now()) @db.DateTime(0)
  updatedAt   DateTime      @default(now()) @db.DateTime(0)
  deletedAt   DateTime?     @db.DateTime(0)
  LoanAddress LoanAddress[]
}

model LoanAddress {
  id        Int               @id @default(autoincrement())
  loanId    Int
  cityId    Int
  address   String?           @db.VarChar(255)
  type      LoanAddress_type?
  userId    Int
  createdAt DateTime          @default(now()) @db.DateTime(0)
  updatedAt DateTime          @default(now()) @db.DateTime(0)
  deletedAt DateTime?         @db.DateTime(0)
  Loan      Loan              @relation(fields: [loanId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_LoanAddress_1")
  City      City              @relation(fields: [cityId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_LoanAddress_2")
  User      User              @relation(fields: [userId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_LoanAddress_3")
  LoanVisit LoanVisit[]

  @@index([loanId], map: "fk_LoanAddress_1")
  @@index([cityId], map: "fk_LoanAddress_2")
  @@index([userId], map: "fk_LoanAddress_3")
}

model LoanVisit {
  id            Int               @id @default(autoincrement())
  loanId        Int
  status        LoanVisit_status? @default(n_a)
  loanAddressId Int
  comment       String?           @db.VarChar(500)
  scheduledAt   DateTime          @default(now()) @db.DateTime(0)
  expiredAt     DateTime?         @db.DateTime(0)
  userId        Int
  createdAt     DateTime          @default(now()) @db.DateTime(0)
  updatedAt     DateTime          @default(now()) @db.DateTime(0)
  deletedAt     DateTime?         @db.DateTime(0)
  Loan          Loan              @relation(fields: [loanId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_LoanVisit_1")
  LoanAddress   LoanAddress       @relation(fields: [loanAddressId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_LoanVisit_2")
  User          User              @relation(fields: [userId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_LoanVisit_3")

  @@index([loanId], map: "fk_LoanVisit_1")
  @@index([userId], map: "fk_LoanVisit_3")
  @@index([loanAddressId], map: "fk_LoanVisit_2")
}

model StatusMatrix {
  id             Int                     @id @default(autoincrement())
  entityType     StatusMatrix_entityType
  fromStatusId   Int
  toStatusId     Int
  isAllowed      Boolean?                @default(true)
  requiresReason Boolean?                @default(false)
  description    String?                 @db.VarChar(255)
  createdAt      DateTime?               @default(now()) @db.DateTime(0)
  updatedAt      DateTime?               @default(now()) @db.DateTime(0)
  deletedAt      DateTime?               @db.DateTime(0)

  @@unique([entityType, fromStatusId, toStatusId], map: "unique_transition")
  @@index([deletedAt], map: "idx_deleted")
  @@index([entityType, fromStatusId], map: "idx_entity_from")
}

model StatusMatrixAutomatic {
  id              Int                              @id @default(autoincrement())
  entityType      StatusMatrixAutomatic_entityType
  fromStatusId    Int
  toStatusId      Int
  daysAfterStatus Int?
  isActive        Boolean?                         @default(true)
  description     String?                          @db.VarChar(255)
  createdAt       DateTime?                        @default(now()) @db.DateTime(0)
  updatedAt       DateTime?                        @default(now()) @db.DateTime(0)
  deletedAt       DateTime?                        @db.DateTime(0)

  @@unique([entityType, fromStatusId, toStatusId], map: "unique_auto_rule")
  @@index([deletedAt], map: "idx_deleted")
  @@index([entityType, isActive], map: "idx_entity_active")
}

model VisitStatus {
  id        Int       @id @default(autoincrement())
  title     String    @db.VarChar(500)
  createdAt DateTime  @default(now()) @db.DateTime(0)
  updatedAt DateTime  @default(now()) @db.DateTime(0)
  deletedAt DateTime? @db.DateTime(0)

  @@index([deletedAt], map: "idx_deletedAt")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model LoanBalanceHistory {
  id           Int       @id @default(autoincrement())
  loanId       Int
  principal    Decimal   @db.Decimal(12, 2)
  interest     Decimal   @db.Decimal(12, 2)
  penalty      Decimal   @db.Decimal(12, 2)
  otherFee     Decimal   @db.Decimal(12, 2)
  legalCharges Decimal   @db.Decimal(12, 2)
  totalDebt    Decimal   @db.Decimal(12, 2)
  sourceType   String    @db.VarChar(100)
  sourceId     Int?
  createdAt    DateTime  @default(now()) @db.DateTime(0)
  updatedAt    DateTime  @default(now()) @db.DateTime(0)
  deletedAt    DateTime? @db.DateTime(0)
  Loan         Loan      @relation(fields: [loanId], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_LoanBalanceHistory_Loan")

  @@index([createdAt], map: "idx_createdAt")
  @@index([loanId], map: "idx_loanId")
  @@index([sourceType, sourceId], map: "idx_source")
  @@index([sourceType], map: "idx_sourceType")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model PaymentAllocationDetail {
  id              Int       @id @default(autoincrement())
  loanId          Int
  sourceType      String    @default("transaction") @db.VarChar(50)
  sourceId        Int
  componentType   String    @db.VarChar(50)
  amountAllocated Decimal   @db.Decimal(12, 2)
  balanceBefore   Decimal   @db.Decimal(12, 2)
  balanceAfter    Decimal   @db.Decimal(12, 2)
  allocationOrder Int
  createdAt       DateTime  @default(now()) @db.DateTime(0)
  updatedAt       DateTime  @default(now()) @db.DateTime(0)
  deletedAt       DateTime? @db.DateTime(0)
  Loan            Loan      @relation(fields: [loanId], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_PaymentAllocationDetail_Loan")

  @@index([componentType], map: "idx_componentType")
  @@index([createdAt], map: "idx_createdAt")
  @@index([sourceType, sourceId], map: "idx_source")
  @@index([sourceType], map: "idx_sourceType")
  @@index([loanId], map: "idx_loanId")
}

model PortfolioCaseGroup {
  id        Int       @id @default(autoincrement())
  groupName String    @db.VarChar(500)
  createdAt DateTime  @default(now()) @db.DateTime(0)
  updatedAt DateTime  @default(now()) @db.DateTime(0)
  deletedAt DateTime? @db.DateTime(0)
  Loan      Loan[]

  @@index([deletedAt], map: "idx_deletedAt")
}

model TaskStatus {
  id        Int       @id @default(autoincrement())
  title     String    @db.VarChar(500)
  createdAt DateTime  @default(now()) @db.DateTime(0)
  updatedAt DateTime  @default(now()) @db.DateTime(0)
  deletedAt DateTime? @db.DateTime(0)
  Tasks     Tasks[]

  @@index([deletedAt], map: "idx_deletedAt")
}

model Reminders {
  id                              Int            @id @default(autoincrement())
  loanId                          Int?
  type                            Reminders_type
  comment                         String?        @db.VarChar(500)
  status                          Boolean        @default(true)
  fromUserId                      Int
  toUserId                        Int
  deadline                        DateTime       @db.Date
  createdAt                       DateTime       @default(now()) @db.DateTime(0)
  updatedAt                       DateTime       @default(now()) @db.DateTime(0)
  deletedAt                       DateTime?      @db.DateTime(0)
  Loan                            Loan?          @relation(fields: [loanId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_Reminders_1")
  User_Reminders_fromUserIdToUser User           @relation("Reminders_fromUserIdToUser", fields: [fromUserId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_Reminders_2")
  User_Reminders_toUserIdToUser   User           @relation("Reminders_toUserIdToUser", fields: [toUserId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_Reminders_3")

  @@index([loanId], map: "fk_Reminders_1_idx")
  @@index([fromUserId], map: "fk_Reminders_2_idx")
  @@index([toUserId], map: "fk_Reminders_3_idx")
  @@index([deletedAt], map: "idx_deletedAt")
  @@index([status], map: "idx_status")
}

model CollectorsMonthlyTarget {
  id           Int       @id @default(autoincrement())
  collectorId  Int
  targetAmount Decimal   @db.Decimal(12, 2)
  year         Int
  month        Int       @db.TinyInt
  createdAt    DateTime  @default(now()) @db.DateTime(0)
  updatedAt    DateTime  @default(now()) @db.DateTime(0)
  deletedAt    DateTime? @db.DateTime(0)
  User         User      @relation(fields: [collectorId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_collector")

  @@unique([collectorId, year, month], map: "uc_collector_year_month")
}

model TransactionUserAssignments {
  id            Int         @id @default(autoincrement())
  transactionId Int
  userId        Int
  roleId        Int
  amount        Decimal?    @default(0.00) @db.Decimal(12, 2)
  year          Int
  month         Int         @db.TinyInt
  createdAt     DateTime    @default(now()) @db.DateTime(0)
  updatedAt     DateTime    @default(now()) @db.DateTime(0)
  deletedAt     DateTime?   @db.DateTime(0)
  Role          Role        @relation(fields: [roleId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_role")
  Transaction   Transaction @relation(fields: [transactionId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_transaction")
  User          User        @relation(fields: [userId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_user")

  @@index([roleId], map: "fk_role")
  @@index([transactionId], map: "fk_transaction")
  @@index([userId], map: "fk_user")
}

model CollectorMonthlyReport {
  id                                            Int                           @id @default(autoincrement())
  collectorId                                   Int
  year                                          Int
  month                                         Int
  openingPrincipal                              Decimal                       @default(0.00) @db.Decimal(12, 2)
  monthlyPlan                                   Decimal                       @default(0.00) @db.Decimal(12, 2)
  adjustedPlan                                  Decimal                       @default(0.00) @db.Decimal(12, 2)
  collectedAmount                               Decimal                       @default(0.00) @db.Decimal(12, 2)
  collectionRatePercent                         Decimal                       @default(0.00) @db.Decimal(5, 2)
  paidLoanCount                                 Int                           @default(0)
  paymentSuccessRate                            Decimal                       @default(0.00) @db.Decimal(5, 2)
  newLoanCount                                  Int                           @default(0)
  communicatedCount                             Int                           @default(0)
  unreachableCount                              Int                           @default(0)
  agreementCount                                Int                           @default(0)
  agreementCancelledCount                       Int                           @default(0)
  refuseToPayCount                              Int                           @default(0)
  promiseToPayCount                             Int                           @default(0)
  totalLoanCount                                Int                           @default(0)
  callCount                                     Int                           @default(0)
  totalCallDurationSec                          Int                           @default(0)
  smsCount                                      Int                           @default(0)
  markCount                                     Int                           @default(0)
  commentCount                                  Int                           @default(0)
  committeeRequestCount                         Int                           @default(0)
  inactiveOver40DaysCount                       Int                           @default(0)
  totalLegalCharges                             Decimal                       @default(0.00) @db.Decimal(12, 2)
  totalOtherCharges                             Decimal                       @default(0.00) @db.Decimal(12, 2)
  courtCaseCount                                Int                           @default(0)
  courtPrincipalSum                             Decimal                       @default(0.00) @db.Decimal(12, 2)
  executionCaseCount                            Int                           @default(0)
  executionPrincipalSum                         Decimal                       @default(0.00) @db.Decimal(12, 2)
  status                                        CollectorMonthlyReport_status @default(ACTIVE)
  snapshotDate                                  DateTime                      @default(now()) @db.DateTime(0)
  generatedBy                                   Int?
  lockedBy                                      Int?
  loanIds                                       Json?
  createdAt                                     DateTime                      @default(now()) @db.DateTime(0)
  updatedAt                                     DateTime                      @default(now()) @db.DateTime(0)
  deletedAt                                     DateTime?                     @db.DateTime(0)
  User_CollectorMonthlyReport_generatedByToUser User?                         @relation("CollectorMonthlyReport_generatedByToUser", fields: [generatedBy], references: [id], map: "fk_collector_monthly_report_generated_by")
  User_CollectorMonthlyReport_lockedByToUser    User?                         @relation("CollectorMonthlyReport_lockedByToUser", fields: [lockedBy], references: [id], map: "fk_collector_monthly_report_locked_by")
  User_CollectorMonthlyReport_collectorIdToUser User                          @relation("CollectorMonthlyReport_collectorIdToUser", fields: [collectorId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_collector_monthly_report_user")

  @@unique([collectorId, year, month], map: "uq_collector_month")
  @@index([generatedBy], map: "fk_collector_monthly_report_generated_by")
  @@index([lockedBy], map: "fk_collector_monthly_report_locked_by")
  @@index([collectorId], map: "idx_collector")
  @@index([year, month], map: "idx_month_year")
}

model Old_db_additional_contact {
  id               BigInt    @id @default(autoincrement()) @db.UnsignedBigInt
  number           String    @db.VarChar(255)
  loan_id          BigInt    @db.UnsignedBigInt
  communication_id BigInt?   @db.UnsignedBigInt
  relation         String?   @db.VarChar(255)
  comment          String?   @db.Text
  created_at       DateTime? @db.Timestamp(0)
  updated_at       DateTime? @db.Timestamp(0)
  type_id          Int       @default(1)
  source           Int       @default(0)

  @@index([number], map: "NewIndex1")
  @@index([loan_id], map: "additional_contact_loan_id_index")
}

model Old_db_agreement {
  id         BigInt    @id @default(autoincrement()) @db.UnsignedBigInt
  user_id    BigInt    @db.UnsignedBigInt
  loan_id    BigInt    @db.UnsignedBigInt
  comment    String?   @db.Text
  created_at DateTime? @db.Timestamp(0)
  updated_at DateTime? @db.Timestamp(0)
  amount     Float
  active     Int       @db.TinyInt

  @@index([loan_id], map: "agreement_loan_id_index")
}

model Old_db_agreement_schedule {
  id           BigInt    @id @default(autoincrement()) @db.UnsignedBigInt
  agreement_id BigInt    @db.UnsignedBigInt
  payment_date DateTime  @db.Date
  amount       Float
  status_id    BigInt    @db.UnsignedBigInt
  created_at   DateTime? @db.Timestamp(0)
  updated_at   DateTime? @db.Timestamp(0)
}

model Old_db_aml_activity {
  id      BigInt  @id @default(autoincrement()) @db.UnsignedBigInt
  name    String  @db.VarChar(100)
  comment String? @db.Text
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model Old_db_call_log {
  ID           Int       @id @default(autoincrement())
  IDN          Int?
  User_ID      Int       @default(0)
  User_Name    String    @default("") @db.VarChar(100)
  CallID       Int?
  Caller       String?   @db.VarChar(50)
  Called       String?   @db.VarChar(50)
  Name         String?   @db.VarChar(100)
  CallStartStr String?   @db.VarChar(30)
  CallStart    DateTime? @db.DateTime(0)
  CallMonth    Int       @default(1)
  Time         String?   @db.VarChar(30)
  Duration     Int       @default(0)
  BilledTime   String?   @db.VarChar(30)
  Rate         String?   @db.VarChar(30)
  Price        String?   @db.VarChar(30)
  UserField    String?   @db.VarChar(30)
  Destination  String?   @db.VarChar(255)
  Created_At   DateTime? @db.DateTime(0)
}

model Old_db_case_visit_history {
  ID              Int       @id @default(autoincrement()) @db.UnsignedInt
  Visit_Status_ID Int       @default(0) @db.UnsignedInt
  LoanID          Int       @db.UnsignedInt
  Comment         String?   @db.VarChar(500)
  User_ID         Int       @default(1)
  Created_At      DateTime? @db.Timestamp(0)
  Updated_At      DateTime? @db.Timestamp(0)

  @@index([Visit_Status_ID], map: "index2")
  @@index([LoanID], map: "index3")
}

model Old_db_case_visit_statuses {
  Visit_Status_ID Int    @id @default(autoincrement())
  Visit_Status    String @db.VarChar(50)
}

model Old_db_clients {
  ID               Int       @id @default(autoincrement())
  loanid           BigInt    @default(0) @db.UnsignedBigInt
  case             String?   @db.VarChar(100)
  portfolio_id     Int?      @default(0)
  portfolio        String?   @default("0") @db.VarChar(100)
  Full_Name        String?   @default("-") @db.VarChar(255)
  ID_Number        String?   @default("-") @db.VarChar(50)
  Client_Status_ID Int?      @default(5)
  Client_Status    String?   @default("0") @db.VarChar(50)
  FirstName        String    @default("-") @db.VarChar(100)
  LastName         String    @default("-") @db.VarChar(100)
  BirthDate        String?   @db.VarChar(20)
  Gender           String    @default("N/A") @db.VarChar(10)
  Borrower_Status  String    @default("/") @db.VarChar(15)
  Residence        String?   @db.VarChar(10)
  Address          String?   @db.VarChar(1024)
  Phone1           String    @db.VarChar(100)
  Phone2           String?   @db.VarChar(100)
  Phone3           String?   @db.VarChar(100)
  Status           String    @db.VarChar(30)
  CaseINN          Int       @default(0)
  Role_Of_Customer String    @default("-") @db.VarChar(30)
  City             String?   @db.VarChar(100)
  Email            String    @default("N/A") @db.VarChar(100)
  Updated_At       DateTime? @db.Timestamp(0)

  @@index([Full_Name], map: "full_name")
  @@index([ID_Number], map: "id_number")
  @@index([loanid], map: "loanid")
}

model Old_db_clients_address {
  ID         Int       @id @default(autoincrement())
  ID_Number  String    @default("0") @db.VarChar(11)
  Full_Name  String?   @db.VarChar(200)
  Address    String?   @db.VarChar(200)
  Info_Data  String?   @db.VarChar(4096)
  Created_At DateTime? @db.DateTime(0)
  Updated_At DateTime? @db.Timestamp(0)

  @@index([ID_Number], map: "ID_Number")
  @@index([ID_Number], map: "ID_Number_2")
}

model Old_db_clients_contact_relation {
  myID         Int    @id @default(autoincrement())
  Relation_ID  Int
  Relation_ENG String @default("") @db.VarChar(100)
  Relation_GE  String @default("") @db.VarChar(100)
}

model Old_db_clients_contact_type {
  id   BigInt @id @default(autoincrement()) @db.UnsignedBigInt
  name String @db.VarChar(255)
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model Old_db_clients_debts {
  ID            Int       @id @default(autoincrement())
  ID_Number     String    @db.VarChar(15)
  Info_Type     Int       @default(1)
  Info_Data     String    @default("") @db.VarChar(8096)
  Employee_ID   Int       @default(0)
  Employee_Name String?   @db.VarChar(100)
  Created_At    DateTime? @db.DateTime(0)
  Updated_At    DateTime? @db.Timestamp(0)
  count         Int       @default(0)
  Full_Name     String    @db.VarChar(100)
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model Old_db_clients_public_data {
  ID               Int       @id @default(autoincrement())
  ID_Number        String    @default("0") @db.VarChar(11)
  Full_Name        String?   @db.VarChar(200)
  Address          String?   @db.VarChar(200)
  City             String    @default("") @db.VarChar(200)
  Info_Data        String?   @db.VarChar(4096)
  Info_Created_At  DateTime? @db.DateTime(0)
  Executor         String?   @db.VarChar(150)
  Enforcement_Case String?   @db.VarChar(128)

  @@index([ID_Number], map: "ID_Number")
  @@index([ID_Number], map: "ID_Number_2")
}

model Old_db_comment {
  id         BigInt    @id @default(autoincrement())
  case_id    Int?
  user_id    Int?
  comment    String?   @db.VarChar(3072)
  created_at DateTime? @db.Timestamp(0)
  updated_at DateTime? @db.Timestamp(0)
  edited     Int       @default(0)
  Attachment String    @default("") @db.VarChar(4096)
  File_Name  String    @default("") @db.VarChar(1024)

  @@index([case_id], map: "NewIndex1")
  @@index([user_id], map: "NewIndex2")
  @@index([created_at], map: "created_at")
}

model Old_db_loanDebts {
  id         BigInt @id @default(autoincrement()) @db.UnsignedBigInt
  case_id    BigInt @unique(map: "case_id_UNIQUE") @db.UnsignedBigInt
  legal      Float? @default(0.00)
  other_fee  Float? @default(0.00)
  penalty    Float? @default(0.00)
  interest   Float? @default(0.00)
  principal  Float? @default(0.00)
  total_debt Float? @default(0.00)

  @@index([case_id], map: "index2")
}

model Old_db_loans {
  LoanID                 BigInt    @default(0) @db.UnsignedBigInt
  myID                   Int       @id @default(autoincrement())
  Case                   String?   @db.VarChar(100)
  CaseGroup_ID           Int?      @default(0)
  CaseGroup              String?   @default("None") @db.VarChar(50)
  Portfolio_ID           Int?      @default(0)
  Portfolio_Parent       Int?      @default(0)
  Portfolio              String?   @default("0") @db.VarChar(100)
  Lender_ID              Int       @default(0)
  Lender                 String    @db.VarChar(100)
  Full_Name              String?   @db.VarChar(255)
  ID_Number              String?   @db.VarChar(50)
  Client_Status_ID       Int?      @default(5)
  Client_Status          String?   @default("N/A") @db.VarChar(100)
  Current_Debt           Decimal?  @default(0.00) @db.Decimal(15, 2)
  Current_Principal      Decimal?  @default(0.00) @db.Decimal(15, 2)
  Currency               String?   @default("GEL") @db.VarChar(45)
  Legal_Stage_ID         Int?      @default(0)
  Legal_Stage            String?   @default("N/A") @db.VarChar(100)
  Stage_Update           DateTime? @db.DateTime(0)
  Litigation_Stage_ID    Int       @default(0)
  Litigation_Stage       String    @default("N/A") @db.VarChar(60)
  Collateral_Status_ID   Int?      @default(1)
  Collateral_Status      String?   @default("None") @db.VarChar(100)
  CollateralINN          Int       @default(0)
  Collection_Status_ID   Int?      @default(1)
  Collection_Status      String?   @default("NEW") @db.VarChar(100)
  Collection_Status_Date DateTime? @db.DateTime(0)
  Mark_ID                Int       @default(0)
  Mark                   String    @default("None") @db.VarChar(100)
  MarkINN                Int       @default(0)
  Collector_ID           Int?      @default(0)
  Collector              String?   @db.VarChar(255)
  Lawyer_ID              Int?      @default(0)
  Lawyer                 String?   @default("N/A") @db.VarChar(100)
  Assign_Date            DateTime? @db.DateTime(0)
  Last_Activity          DateTime? @db.DateTime(0)
  Lawyer_Assign_Date     DateTime? @db.DateTime(0)
  lawyer_Last_Activity   DateTime? @db.DateTime(0)
  JuniorLawyer_ID        Int       @default(0)
  JuniorLawyer           String    @default("None") @db.VarChar(120)
  JuniorLawyer_Date      DateTime? @db.DateTime(0)
  ExecLawyer_ID          Int       @default(0)
  ExecLawyer             String    @default("None") @db.VarChar(120)
  ExecLawyer_Date        DateTime? @db.DateTime(0)
  AML_Activity_ID        Int?      @default(0)
  AML_Activity           String?   @default("N/A") @db.VarChar(50)
  AML_Risk_Level_ID      Int?      @default(0)
  AML_Risk_Level         String?   @default("N/A") @db.VarChar(50)
  AML_Source_Income_ID   Int?      @default(0)
  AML_Source_Income      String?   @default("N/A") @db.VarChar(50)
  AML_Trans_Type_ID      Int?      @default(0)
  AML_Trans_Type         String?   @default("N/A") @db.VarChar(50)
  CL                     Int?      @default(0)
  City_ID                Int       @default(0)
  City                   String    @default("N/A") @db.VarChar(100)
  Visit_Status_ID        Int       @default(1)
  Visit_Status           String    @default("N/A") @db.VarChar(50)
  Visit_Status_Date      DateTime? @db.DateTime(0)
  Principal              Decimal?  @default(0.00) @db.Decimal(15, 2)
  Interest               Decimal?  @default(0.00) @db.Decimal(15, 2)
  Penalty                Decimal?  @default(0.00) @db.Decimal(15, 2)
  Other_Fees             Decimal?  @default(0.00) @db.Decimal(15, 2)
  Legal_Charges          Decimal?  @default(0.00) @db.Decimal(15, 2)
  Paid_Principal         Decimal?  @default(0.00) @db.Decimal(15, 2)
  Paid_Interest          Decimal?  @default(0.00) @db.Decimal(15, 2)
  Paid_Other_Fees        Decimal?  @default(0.00) @db.Decimal(15, 2)
  Paid_Penalty           Decimal?  @default(0.00) @db.Decimal(15, 2)
  Paid_Legal_Charges     Decimal   @default(0.00) @db.Decimal(15, 2)
  Paid_Agreement         Decimal   @default(0.00) @db.Decimal(15, 2)
  Total_Payments         Decimal?  @default(0.00) @db.Decimal(15, 2)
  Agreement_Debt         Decimal?  @default(0.00) @db.Decimal(15, 2)
  Agreement_Date         DateTime? @db.DateTime(0)
  Agreement_Min          Decimal   @default(0.00) @db.Decimal(15, 2)
  Last_View              DateTime? @db.Date
  CaseINN                Int
  Status                 Int       @default(1)
  Close_Date             DateTime? @db.DateTime(0)
  tmp_pay                Decimal   @default(0.00) @db.Decimal(15, 2)
  Last_Payment_Date      DateTime? @db.Date
  Phone                  String    @default("0") @db.VarChar(50)
  IsComitee              Int       @default(0)
  Ex_Debt                Decimal   @default(0.00) @db.Decimal(15, 2)
  Rate                   Decimal   @default(1.0000) @db.Decimal(15, 4)

  @@index([Collection_Status_ID], map: "Collection_Status_ID")
  @@index([Collector_ID], map: "Collector_ID")
  @@index([ID_Number], map: "ID_Number")
  @@index([Lawyer_ID], map: "Lawyer_ID")
  @@index([LoanID], map: "NewIndex1")
  @@fulltext([Case, Full_Name, ID_Number, Collector], map: "idx_loans_search")
}

model Old_db_paymentnew {
  id                 BigInt    @id @default(autoincrement()) @db.UnsignedBigInt
  LoanID             BigInt    @db.UnsignedBigInt
  amount             Float
  payment_date       DateTime  @db.Date
  comment            String?   @db.Text
  created_at         DateTime? @db.Timestamp(0)
  updated_at         DateTime? @db.Timestamp(0)
  portfolio_id       BigInt    @db.UnsignedBigInt
  channel_id         BigInt    @db.UnsignedBigInt
  user_id            BigInt    @db.UnsignedBigInt
  currency           String    @db.VarChar(15)
  employee_id        Int?      @default(0)
  Paid_Principal     Decimal   @default(0.00) @db.Decimal(15, 2)
  Paid_Interest      Decimal   @default(0.00) @db.Decimal(15, 2)
  Paid_Penalty       Decimal   @default(0.00) @db.Decimal(15, 2)
  Paid_Other_Fees    Decimal   @default(0.00) @db.Decimal(15, 2)
  Paid_Legal_Charges Decimal   @default(0.00) @db.Decimal(15, 2)
  Paid_Agreement     Decimal   @default(0.00) @db.Decimal(15, 2)
  Debt               Decimal?  @default(0.00) @db.Decimal(15, 2)
  Debt_Old           Decimal   @default(0.00) @db.Decimal(15, 2)
  Account_N          String    @default(" ") @db.VarChar(150)
  Lawyer_ID          Int       @default(0)
  Legal_Stage_ID     Int       @default(0)
  AmountGEL          Decimal   @default(0.00) @db.Decimal(15, 2)
  Rate               Decimal   @default(1.0000) @db.Decimal(15, 4)

  @@index([Account_N], map: "Account_N")
  @@index([Lawyer_ID], map: "Lawyer_ID")
  @@index([Legal_Stage_ID], map: "Legal_Stage_ID")
  @@index([currency], map: "currency")
  @@index([employee_id, payment_date], map: "idx_employee_date")
  @@index([Legal_Stage_ID], map: "idx_legal_stage")
  @@index([LoanID], map: "idx_loanid")
  @@index([employee_id], map: "index4")
  @@index([LoanID], map: "payment_loan_id_index")
  @@index([payment_date], map: "payment_payment_date_index")
  @@index([portfolio_id], map: "portfolio_id")
  @@index([user_id], map: "user_id")
  @@fulltext([comment], map: "idx_payment_comment")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model Old_db_plan_collection {
  ID              Int       @id @default(autoincrement())
  Collector_ID    Int       @default(0)
  Collector       String    @db.VarChar(100)
  UserType        Int       @default(0)
  TeamLeader      Int       @default(0)
  Teams           Int       @default(0)
  TeamsGroup      Int       @default(0)
  PlanYear        Int       @default(2025)
  PlanMonth       Int       @default(7)
  PlanSumm        Decimal   @default(0.00) @db.Decimal(15, 2)
  PlanCollection  Decimal   @default(0.00) @db.Decimal(15, 2)
  Principal       Decimal   @default(0.00) @db.Decimal(15, 2)
  Portfolio0Pay   Decimal   @default(0.00) @db.Decimal(15, 2)
  Percent         Decimal   @default(0.00) @db.Decimal(15, 2)
  PaymentsCount   Int       @default(0)
  CaseCount       Int       @default(0)
  PaymentsRate    Decimal   @default(0.00) @db.Decimal(15, 2)
  Calls           Int       @default(0)
  Duration        Int       @default(0)
  DurationTime    DateTime  @default(dbgenerated("'00:00:00'")) @db.Time(0)
  SMS             Int?      @default(0)
  Marks           Int       @default(0)
  Day40           Int       @default(0)
  Committee       Int       @default(0)
  Comment         Int       @default(0)
  Clients         Int       @default(0)
  Total           Int       @default(0)
  LegalCharges    Decimal   @default(0.00) @db.Decimal(15, 2)
  CourtCaseCount  Int       @default(0)
  CourtCaseAmount Decimal   @default(0.00) @db.Decimal(15, 2)
  ExecCaseCount   Int       @default(0)
  ExecCaseAmount  Decimal   @default(0.00) @db.Decimal(15, 2)
  New             Int       @default(0)
  Communication   Int       @default(0)
  Unreachable     Int       @default(0)
  RefusedToPay    Int       @default(0)
  PromisedToPay   Int       @default(0)
  Agreement       Int       @default(0)
  AgreementCancel Int       @default(0)
  Salary          Decimal   @default(0.00) @db.Decimal(15, 2)
  Created_At      DateTime? @db.DateTime(0)
  Updated_At      DateTime? @db.Timestamp(0)
  AdminID         Int       @default(63)
  AdminName       String    @default("Wbendela") @db.VarChar(100)
}

model Old_db_portfolio {
  id            BigInt    @id @default(autoincrement()) @db.UnsignedBigInt
  name          String    @db.VarChar(255)
  created_at    DateTime? @db.Timestamp(0)
  updated_at    DateTime? @db.Timestamp(0)
  parent        String?   @db.VarChar(45)
  Purchase_Year String?   @db.VarChar(4)
  Purchase_Date DateTime? @db.Date
  LenderID      Int       @default(0)
  Lender        String?   @db.VarChar(50)
  Company       String?   @db.VarChar(50)
}

model Old_db_portfolio_casegroup {
  CaseGroup_ID BigInt    @id @default(autoincrement()) @db.UnsignedBigInt
  CaseGroup    String    @db.VarChar(255)
  created_at   DateTime? @db.Timestamp(0)
  updated_at   DateTime? @db.Timestamp(0)
  parent       String?   @default("0") @db.VarChar(45)
}

model Old_db_promised {
  promised_id  Int       @id @default(autoincrement())
  Collector_ID Int?      @db.UnsignedInt
  LoanID       Int?      @db.UnsignedInt
  Payment_Date DateTime? @db.Date
  Amount       Decimal?  @db.Decimal(15, 2)
  fStatus      String    @default("") @db.VarChar(15)
  Description  String?   @db.MediumText
  Active       Int?      @default(1)
  type         Int?      @default(2)
}

model Old_db_reminder {
  id            BigInt    @id @default(autoincrement()) @db.UnsignedBigInt
  user_id       BigInt    @db.UnsignedBigInt
  reminder_date DateTime  @db.Date
  comment       String?   @db.Text
  priority      Int       @db.TinyInt
  created_at    DateTime? @db.Timestamp(0)
  updated_at    DateTime? @db.Timestamp(0)
  loan_id       BigInt    @db.UnsignedBigInt
  active        Int       @default(1) @db.TinyInt
  type          Int       @default(0)

  @@index([loan_id], map: "reminder_loan_id_index")
  @@index([reminder_date], map: "reminder_reminder_date_index")
}

model Old_db_tasks {
  id         Int       @id @default(autoincrement())
  from_user  Int
  to_user    Int
  task       String    @default("") @db.VarChar(2048)
  response   String?   @default("") @db.VarChar(2048)
  dead_line  DateTime  @db.Date
  status     Int       @default(1)
  created_at DateTime? @db.Timestamp(0)
  updated_at DateTime? @db.Timestamp(0)
  LoanID     Int       @default(0)
  Case       String?   @default("None") @db.VarChar(50)

  @@index([from_user], map: "index2")
  @@index([to_user], map: "index3")
  @@index([status], map: "index4")
  @@index([dead_line], map: "index5")
}

model Old_db_users {
  id              Int       @id @default(autoincrement())
  name            String?   @db.VarChar(255)
  user            String?   @db.VarChar(255)
  password        String?   @db.VarChar(255)
  created_at      DateTime? @db.DateTime(0)
  updated_at      DateTime? @db.DateTime(0)
  admin           Int?
  active          Int?      @default(1)
  team_leader     Int       @default(0)
  teams           Int       @default(0)
  SIP             String?   @db.VarChar(3)
  Phone           String?   @db.VarChar(12)
  RegionalManager Int       @default(0)
  RegionalTeams   String    @default("") @db.VarChar(300)
  Region          Int       @default(0)
}

enum PaymentCommitment_type {
  agreement
  promise
}

enum SmsHistory_status {
  success
  failed
}

enum LoanAssignmentHistory_action {
  assigned
  reassigned
  unassigned
}

enum Committee_type {
  none
  close
  correction
  discount
  hopeless
}

enum Committee_status {
  pending
  complete
}

enum Templates_type {
  court
  email
}

enum TeamMembership_teamRole {
  leader
  member
}

enum LoanAddress_type {
  registered
  current
}

enum LoanVisit_status {
  n_a       @map("n/a")
  pending
  completed
  canceled
}

enum StatusMatrix_entityType {
  LOAN
  LOAN_VISIT
  DEBTOR
  TASK
  COMMITTEE
}

enum StatusMatrixAutomatic_entityType {
  LOAN
  LOAN_VISIT
  DEBTOR
  TASK
  COMMITTEE
}

enum Charges_status {
  UNPAID
  PARTIALLY_PAID
  PAID
}

enum Reminders_type {
  Callback
  Agreement
  Promised_to_pay @map("Promised to pay")
}

enum CollectorMonthlyReport_status {
  ACTIVE
  FROZEN
  CLOSED
}
